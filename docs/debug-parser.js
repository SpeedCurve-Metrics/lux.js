!function(){"use strict";"function"==typeof SuppressedError&&SuppressedError;var e={_:"navigationStart",as:"activationStart",rs:"redirectStart",re:"redirectEnd",fs:"fetchStart",ds:"domainLookupStart",de:"domainLookupEnd",cs:"connectStart",sc:"secureConnectionStart",ce:"connectEnd",qs:"requestStart",bs:"responseStart",be:"responseEnd",oi:"domInteractive",os:"domContentLoadedEventStart",oe:"domContentLoadedEventEnd",oc:"domComplete",ls:"loadEventStart",le:"loadEventEnd",sr:"startRender",fc:"firstContentfulPaint",lc:"largestContentfulPaint"};function t(e){return e.map(function(e){return JSON.stringify(e)}).join(", ")}var n=document.querySelector("#input"),r=document.querySelector("#event-counter"),a=document.querySelector("#output"),c=document.querySelector("#parse"),o=document.querySelectorAll(".event-filter");if(!n||!a||!c)throw new Error("Cannot start debug parser.");function s(a){a.innerHTML="";var c=[];try{c=JSON.parse(n.value)}catch(e){a.appendChild(i("Could not parse input: ".concat(e),"red"))}var s=c.filter(function(e){return 23===e[1]});r.innerText="(".concat(c.length," events; ").concat(s.length," page views)");for(var u=Number(new Date(c[0][0])),d=0,l=c;d<l.length;d++){var m=l[d];if(41===m[1]){u=m[2][0];break}}var p=u,f=!1,g=function(e){var t=[];return e.forEach(function(e){var n=e.getAttribute("data-event");e.checked&&n&&t.push(n)}),t}(o);c.forEach(function(n,r){var o,s,d,l=Number(new Date(n[0]))-u,m=function(e,n){if(function(e){return[9,85,90,80,81,86,82].includes(e)}(e[1])&&!n.includes("verbose"))return"";var r=e[2],a=function(e){switch(e){case 1:return"EvaluationStart";case 2:return"EvaluationEnd";case 3:return"InitCalled";case 4:return"MarkCalled";case 5:return"MeasureCalled";case 6:return"AddDataCalled";case 7:return"SendCalled";case 8:return"ForceSampleCalled";case 9:return"DataCollectionStart";case 10:return"UnloadHandlerTriggered";case 11:return"OnloadHandlerTriggered";case 12:return"MarkLoadTimeCalled";case 13:return"SendCancelledPageHidden";case 14:return"StartSoftNavigationCalled";case 16:return"SendCancelledSpaMode";case 17:return"BfCacheRestore";case 21:return"SessionIsSampled";case 22:return"SessionIsNotSampled";case 23:return"MainBeaconSent";case 24:return"UserTimingBeaconSent";case 25:return"InteractionBeaconSent";case 26:return"CustomDataBeaconSent";case 41:return"NavigationStart";case 42:return"PerformanceEntryReceived";case 43:return"PerformanceEntryProcessed";case 44:return"TrackingParamAdded";case 51:return"PerformanceObserverError";case 52:return"InputEventPermissionError";case 53:return"InnerHtmlAccessError";case 54:return"EventTargetAccessError";case 55:return"CookieReadError";case 56:return"CookieSetError";case 57:return"PageLabelEvaluationError";case 71:return"NavTimingNotSupported";case 72:return"PaintTimingNotSupported";case 80:return"PostBeaconInitialised";case 81:return"PostBeaconSendCalled";case 82:return"PostBeaconTimeoutReached";case 83:return"PostBeaconSent";case 85:return"PostBeaconCancelled";case 86:return"PostBeaconStopRecording";case 87:return"PostBeaconMetricRejected";case 89:return"PostBeaconSendFailed";case 90:return"PostBeaconCSPViolation";case 91:return"PostBeaconCollector"}return"Unknown Event"}(e[1]);switch(r.length&&(a+=" (".concat(t(r),")")),e[1]){case 0:return"The lux.js script was not loaded on this page.";case 1:return"lux.js v".concat(r[0]," init begin.");case 2:return"lux.js init complete.";case 3:return"üü¢ LUX.init() - new page view started";case 14:return"üü¢ LUX.startSoftNavigation() - new page view started";case 12:return"üéØ LUX.markLoadTime(".concat(t(r),")");case 4:return n.includes("userTiming")?"LUX.mark(".concat(t(r),")"):"";case 5:return n.includes("userTiming")?"LUX.measure(".concat(t(r),")"):"";case 6:return n.includes("addData")?"LUX.addData(".concat(t(r),")"):"";case 44:return"Tracking parameter ".concat(r[0],"=").concat(r[1]," picked up automatically");case 7:return"LUX.send()";case 13:return"This beacon was not sent because the page visibility was hidden.";case 16:return"‚ÑπÔ∏è LUX.send() was ignored because SPA Mode is enabled.";case 8:return"LUX.forceSample()";case 9:return"Preparing to send main beacon. Metrics received after this point may be ignored.";case 10:return"‚§¥Ô∏è Unload handler was triggered.";case 11:return a="Onload handler was triggered after ".concat(r[0]," ms."),r[1]>0&&(a+=" Minimum measure time was ".concat(r[1])),a;case 21:return"Sample rate is ".concat(r[0],"%. This session is being sampled.");case 22:return"Sample rate is ".concat(r[0],"%. This session is not being sampled.");case 23:return a="üì´ Main beacon sent",n.includes("beaconUrl")&&(a+=": ".concat(r[0])),a;case 24:return a="üìß Supplementary user timing beacon sent",n.includes("beaconUrl")&&(a+=": ".concat(r[0])),a;case 25:return a="üìß Supplementary user interaction beacon sent",n.includes("beaconUrl")&&(a+=": ".concat(r[0])),a;case 26:return a="üìß Supplementary custom data beacon sent",n.includes("beaconUrl")&&(a+=": ".concat(r[0])),a;case 80:return"POST beacon initialised.";case 81:return"POST beacon send() called.";case 82:return"POST beacon maximum measure timeout reached.";case 83:return n.includes("beaconUrl")?"üì´ POST beacon sent: ".concat(r[0]):"üì´ POST beacon sent.";case 89:return n.includes("beaconUrl")?"‚ö†Ô∏è POST beacon send failed: ".concat(r[0]):"‚ö†Ô∏è POST beacon send failed.";case 85:return"POST beacon cancelled.";case 86:return"POST beacon is no longer recording metrics. Metrics received after this point may be ignored.";case 87:return"POST beacon metric rejected: ".concat(r[0]);case 90:return"POST beacon cancelled due to CSP violation.";case 91:return n.includes("metrics")?"POST beacon metric collector: ".concat(r[0]," (has data: ").concat(r[1],")"):"";case 41:return"";case 42:return n.includes("metrics")?"layout-shift"===r[0].entryType?"Received layout shift at ".concat(r[0].startTime.toFixed()," ms with value of ").concat(r[0].value.toFixed(3)):"longtask"===r[0].entryType?"Received long task with duration of ".concat(r[0].duration," ms"):"event"===r[0].entryType?0===r[0].interactionId?"Ignored INP entry with no interaction ID":"Received INP entry with duration of ".concat(r[0].duration," ms (ID: ").concat(r[0].interactionId,")"):"first-input"===r[0].entryType?"Received FID entry with duration of ".concat(r[0].duration," ms"):"largest-contentful-paint"===r[0].entryType?"Received LCP entry at ".concat(r[0].startTime.toFixed()," ms"):"element"===r[0].entryType?"Received element timing entry for ".concat(r[0].identifier," at ").concat(r[0].startTime.toFixed()," ms"):(a="Received ".concat(r[0].entryType," entry"),r[0].startTime&&(a+=" at ".concat(r[0].startTime.toFixed()," ms")),a):"";case 43:return n.includes("metrics")&&"largest-contentful-paint"===r[0].entryType?"Picked LCP from entry at ".concat(r[0].startTime.toFixed()," ms"):"";case 51:return"Error while initialising PerformanceObserver: ".concat(r[0]);case 52:return"Error reading input event. Cannot calculate FID for this page.";case 53:return"Cannot read the innerHTML property of an element. Cannot calculate inline style or script sizes for this page.";case 54:return"Error reading input event. Cannot calculate user interaction times for this page.";case 55:return"Error reading session cookie. This page will not be linked to a user session.";case 56:return"Error setting session cookie. This page will not be linked to a user session.";case 57:return"Error while evaluating '".concat(r[0],"' for the page label: ").concat(r[1]);case 71:return"The Navigation Timing API is not supported. Performance metrics for this page will be limited.";case 72:return"Start render time could not be determined."}return a}(n,g),v=n[2];if(m){if(function(e){return[23,26,25,24].includes(e)}(n[1])){(P=i("".concat((new Intl.NumberFormat).format(l)," ms: ").concat(m))).classList.add("tooltip-container");var b=new URL(v[0]),h=(d=(o=b,s="NT",o.searchParams.get(s)||"").match(/([a-z]+)?[0-9]+/g))?Object.fromEntries(d.map(function(t){var n=t.match(/[a-z]+/);return[n?e[n[0]]:"navigationStart",parseFloat(t.match(/\d+/)[0])]})):{};(T=document.createElement("div")).className="tooltip",T.innerHTML='\n          <div class="tooltip-inner">\n            <b>Page label:</b> '.concat(b.searchParams.get("l"),"<br>\n            <b>Hostname:</b> ").concat(b.searchParams.get("HN"),"<br>\n            <b>Path:</b> ").concat(b.searchParams.get("PN"),"<br>\n            <b>lux.js version:</b> ").concat(b.searchParams.get("v"),"<br>\n            <hr>\n            <b>LCP:</b> ").concat(h.largestContentfulPaint,"<br>\n            <b>CLS:</b> ").concat(b.searchParams.get("DCLS"),"<br>\n            <b>INP:</b> ").concat(b.searchParams.get("INP"),"<br>\n            <b>FID:</b> ").concat(b.searchParams.get("FID"),"<br>\n          </div>\n        "),P.appendChild(T),a.appendChild(P)}else if(1===n[1]){(P=i("".concat((new Intl.NumberFormat).format(l)," ms: ").concat(m," Hover to view configuration."))).classList.add("tooltip-container");var S=v[1];try{S=JSON.parse(S)}catch(e){}(T=document.createElement("div")).className="tooltip",T.innerHTML='\n          <div class="tooltip-inner">\n            <pre>'.concat(JSON.stringify(S,null,4),"</pre>\n          </div>\n        "),P.appendChild(T),a.appendChild(P)}else if(83===n[1]){var P;(P=i("".concat((new Intl.NumberFormat).format(l)," ms: ").concat(m," Hover to view data."))).classList.add("tooltip-container");var T,C=v[1];try{C=JSON.parse(C)}catch(e){}(T=document.createElement("div")).className="tooltip",T.innerHTML='\n          <div class="tooltip-inner">\n            <pre>'.concat(JSON.stringify(C,null,4),"</pre>\n          </div>\n        "),P.appendChild(T),a.appendChild(P)}else a.appendChild(i("".concat((new Intl.NumberFormat).format(l)," ms: ").concat(m)));if(9===n[1]&&(f=!0),3===n[1]&&(p=n[0],f=!1),7===n[1])n[0]-p<1e3&&a.appendChild(i("".concat((new Intl.NumberFormat).format(l)," ms: ‚ö†Ô∏è Data was gathered for less than 1 second. Consider increasing the value of LUX.minMeasureTime.")));if(f&&42===n[1])42!==c[r+1][1]&&a.appendChild(i("".concat((new Intl.NumberFormat).format(l)," ms: ‚ö†Ô∏è Performance entries were received after the beacon was sent.")))}});var v=new Date(u);a.prepend(i("0 ms: üü¢ Navigation started at ".concat(v.toLocaleDateString()," ").concat(v.toLocaleTimeString())))}function i(e,t){var n=document.createElement("li");return n.textContent=e,n.className=t||"",n}c.addEventListener("click",function(){return s(a)}),o.forEach(function(e){e.addEventListener("change",function(){return s(a)})}),n.value&&s(a)}();
